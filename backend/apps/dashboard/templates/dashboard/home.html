{% extends "dashboard/base_dashboard.html" %}

{% block title %}ููุญุฉ ุงูุชุญูู{% endblock %}

{% block content %}
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">ููุญุฉ ุงูุชุญูู</h1>
      <p class="text-gray-500 mt-2">ูุฑุญุจุงู ุจูุ ุฅููู ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู</p>
    </div>
    <a class="px-6 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:shadow-xl transition-all hover:scale-105 font-bold flex items-center gap-2"
       href="{% url 'dashboard:requests_list' %}">
      <span>๐</span>
      <span>ุงุณุชุนุฑุงุถ ุงูุทูุจุงุช</span>
    </a>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-6 text-white shadow-xl card-hover">
      <div class="flex items-center justify-between mb-4">
        <div class="text-white/80 text-sm font-semibold">ุฅุฌูุงูู ุงูุทูุจุงุช</div>
        <div class="w-12 h-12 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center text-2xl">๐</div>
      </div>
      <div class="text-4xl font-bold">{{ total_requests }}</div>
      <div class="text-white/60 text-xs mt-2">ุทูุจ ูู ุงููุธุงู</div>
    </div>

    <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100 card-hover">
      <div class="flex items-center gap-2 mb-4">
        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center text-white text-lg">๐</div>
        <div class="text-sm font-bold text-gray-700">ุญุณุจ ุงูุญุงูุฉ</div>
      </div>
      <div class="space-y-2">
        {% for row in by_status %}
          <div class="flex items-center justify-between text-sm p-2 rounded-lg hover:bg-gray-50 transition-colors">
            <span class="text-gray-700 font-medium">{{ row.status }}</span>
            <span class="px-2.5 py-0.5 rounded-full bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-700 font-bold text-xs">{{ row.c }}</span>
          </div>
        {% empty %}
          <div class="text-sm text-gray-400 text-center py-4">ูุง ุชูุฌุฏ ุจูุงูุงุช</div>
        {% endfor %}
      </div>
    </div>

    <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100 card-hover">
      <div class="flex items-center gap-2 mb-4">
        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white text-lg">๐ฏ</div>
        <div class="text-sm font-bold text-gray-700">ุญุณุจ ููุน ุงูุทูุจ</div>
      </div>
      <div class="space-y-2">
        {% for row in by_type %}
          <div class="flex items-center justify-between text-sm p-2 rounded-lg hover:bg-gray-50 transition-colors">
            <span class="text-gray-700 font-medium">{{ row.request_type }}</span>
            <span class="px-2.5 py-0.5 rounded-full bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 font-bold text-xs">{{ row.c }}</span>
          </div>
        {% empty %}
          <div class="text-sm text-gray-400 text-center py-4">ูุง ุชูุฌุฏ ุจูุงูุงุช</div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
    <div class="px-6 py-5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white text-lg">โก</div>
        <h2 class="font-bold text-lg text-gray-800">ุขุฎุฑ ุงูุทูุจุงุช</h2>
      </div>
      <a class="px-4 py-2 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:shadow-lg transition-all text-sm font-semibold" href="{% url 'dashboard:requests_list' %}">ุนุฑุถ ุงููู โ</a>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
          <tr>
            <th class="text-right px-6 py-4 text-gray-600 font-bold">#</th>
            <th class="text-right px-6 py-4 text-gray-600 font-bold">ุงูุนููุงู</th>
            <th class="text-right px-6 py-4 text-gray-600 font-bold">ุงูููุน</th>
            <th class="text-right px-6 py-4 text-gray-600 font-bold">ุงูุญุงูุฉ</th>
            <th class="text-right px-6 py-4 text-gray-600 font-bold">ุงููุฏููุฉ</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          {% for r in latest_requests %}
            <tr class="hover:bg-gradient-to-r hover:from-purple-50 hover:to-indigo-50 transition-all">
              <td class="px-6 py-4">
                <span class="px-3 py-1 rounded-lg bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-700 font-bold text-xs">{{ r.id }}</span>
              </td>
              <td class="px-6 py-4">
                <a href="{% url 'dashboard:request_detail' r.id %}" class="font-semibold text-gray-800 hover:text-purple-600 transition-colors">
                  {{ r.title|default:"โ" }}
                </a>
              </td>
              <td class="px-6 py-4">
                <span class="px-2.5 py-1 rounded-full bg-blue-50 text-blue-700 text-xs font-medium">{{ r.request_type }}</span>
              </td>
              <td class="px-6 py-4">
                <span class="px-2.5 py-1 rounded-full bg-emerald-50 text-emerald-700 text-xs font-medium">{{ r.status }}</span>
              </td>
              <td class="px-6 py-4 text-gray-600">{{ r.city|default:"โ" }}</td>
            </tr>
          {% empty %}
            <tr>
              <td class="px-6 py-12 text-gray-400 text-center" colspan="5">
                <div class="flex flex-col items-center gap-2">
                  <span class="text-4xl">๐ญ</span>
                  <span>ูุง ุชูุฌุฏ ุทูุจุงุช ุจุนุฏ.</span>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
