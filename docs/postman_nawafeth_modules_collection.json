{
  "info": {
    "name": "Nawafeth - Finance/Features/Support Modules",
    "_postman_id": "5a0f2ed2-a8a3-4b66-9b2f-5a59d04f7610",
    "description": "Collection for billing, subscriptions, verification, promo, extras, support, features endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://nawafeth-backend.onrender.com"
    },
    {
      "key": "accessToken",
      "value": ""
    },
    {
      "key": "invoiceId",
      "value": "1"
    },
    {
      "key": "planId",
      "value": "1"
    },
    {
      "key": "verificationRequestId",
      "value": "1"
    },
    {
      "key": "verificationDocId",
      "value": "1"
    },
    {
      "key": "promoRequestId",
      "value": "1"
    },
    {
      "key": "supportTicketId",
      "value": "1"
    },
    {
      "key": "provider",
      "value": "mock"
    },
    {
      "key": "sku",
      "value": "uploads_10gb_month"
    },
    {
      "key": "requestId",
      "value": "1"
    },
    {
      "key": "threadId",
      "value": "1"
    }
  ],
  "item": [
    {
      "name": "Billing",
      "item": [
        {
          "name": "Create Invoice",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"فاتورة اشتراك\",\n  \"description\": \"اشتراك باقة PRO\",\n  \"currency\": \"SAR\",\n  \"subtotal\": \"199.00\",\n  \"vat_percent\": \"15.00\",\n  \"reference_type\": \"subscription\",\n  \"reference_id\": \"123\"\n}"
            },
            "url": "{{baseUrl}}/api/billing/invoices/"
          }
        },
        {
          "name": "My Invoices",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/billing/invoices/my/"
          }
        },
        {
          "name": "Invoice Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/billing/invoices/{{invoiceId}}/"
          }
        },
        {
          "name": "Init Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"provider\": \"mock\",\n  \"idempotency_key\": \"invoice-{{invoiceId}}-attempt-1\"\n}"
            },
            "url": "{{baseUrl}}/api/billing/invoices/{{invoiceId}}/init-payment/"
          }
        },
        {
          "name": "Webhook (Paid)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Signature",
                "value": "test-signature"
              },
              {
                "key": "X-Event-Id",
                "value": "evt-001"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"paid\",\n  \"invoice_code\": \"IV000001\"\n}"
            },
            "url": "{{baseUrl}}/api/billing/webhooks/{{provider}}/"
          }
        }
      ]
    },
    {
      "name": "Subscriptions",
      "item": [
        {
          "name": "Plans",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/subscriptions/plans/"
          }
        },
        {
          "name": "My Subscriptions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/subscriptions/my/"
          }
        },
        {
          "name": "Subscribe",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/subscriptions/subscribe/{{planId}}/"
          }
        }
      ]
    },
    {
      "name": "Verification",
      "item": [
        {
          "name": "Create Verification Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"badge_type\": \"blue\"\n}"
            },
            "url": "{{baseUrl}}/api/verification/requests/create/"
          }
        },
        {
          "name": "My Verification Requests",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/verification/requests/my/"
          }
        },
        {
          "name": "Verification Request Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/verification/requests/{{verificationRequestId}}/"
          }
        },
        {
          "name": "Add Verification Document (form-data)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "doc_type",
                  "value": "id",
                  "type": "text"
                },
                {
                  "key": "title",
                  "value": "هوية",
                  "type": "text"
                },
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": "{{baseUrl}}/api/verification/requests/{{verificationRequestId}}/documents/"
          }
        },
        {
          "name": "Backoffice Decide Document",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"is_approved\": true,\n  \"decision_note\": \"مقبول\"\n}"
            },
            "url": "{{baseUrl}}/api/verification/backoffice/documents/{{verificationDocId}}/decision/"
          }
        },
        {
          "name": "Backoffice Finalize Verification",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/verification/backoffice/requests/{{verificationRequestId}}/finalize/"
          }
        }
      ]
    },
    {
      "name": "Promo",
      "item": [
        {
          "name": "Create Promo Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Boost\",\n  \"ad_type\": \"boost_profile\",\n  \"start_at\": \"2026-03-01T10:00:00Z\",\n  \"end_at\": \"2026-03-08T10:00:00Z\",\n  \"frequency\": \"30s\",\n  \"position\": \"normal\",\n  \"target_city\": \"الرياض\"\n}"
            },
            "url": "{{baseUrl}}/api/promo/requests/create/"
          }
        },
        {
          "name": "My Promo Requests",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/promo/requests/my/"
          }
        },
        {
          "name": "Add Promo Asset (form-data)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "asset_type",
                  "value": "image",
                  "type": "text"
                },
                {
                  "key": "title",
                  "value": "Banner",
                  "type": "text"
                },
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": "{{baseUrl}}/api/promo/requests/{{promoRequestId}}/assets/"
          }
        },
        {
          "name": "Backoffice Quote Promo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quote_note\": \"سعر محدث\"\n}"
            },
            "url": "{{baseUrl}}/api/promo/backoffice/requests/{{promoRequestId}}/quote/"
          }
        },
        {
          "name": "Backoffice Reject Promo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reject_reason\": \"غير مطابق\"\n}"
            },
            "url": "{{baseUrl}}/api/promo/backoffice/requests/{{promoRequestId}}/reject/"
          }
        }
      ]
    },
    {
      "name": "Extras",
      "item": [
        {
          "name": "Catalog",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/extras/catalog/"
          }
        },
        {
          "name": "My Extras",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/extras/my/"
          }
        },
        {
          "name": "Buy Extra",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/extras/buy/{{sku}}/"
          }
        }
      ]
    },
    {
      "name": "Support",
      "item": [
        {
          "name": "Teams",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/support/teams/"
          }
        },
        {
          "name": "Create Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ticket_type\": \"tech\",\n  \"description\": \"مشكلة في التطبيق\"\n}"
            },
            "url": "{{baseUrl}}/api/support/tickets/create/"
          }
        },
        {
          "name": "My Tickets",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/support/tickets/my/"
          }
        },
        {
          "name": "Ticket Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/support/tickets/{{supportTicketId}}/"
          }
        },
        {
          "name": "Add Ticket Comment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"تمت تجربة الحل\",\n  \"is_internal\": false\n}"
            },
            "url": "{{baseUrl}}/api/support/tickets/{{supportTicketId}}/comments/"
          }
        },
        {
          "name": "Add Ticket Attachment (form-data)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": "{{baseUrl}}/api/support/tickets/{{supportTicketId}}/attachments/"
          }
        },
        {
          "name": "Backoffice Tickets",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/support/backoffice/tickets/"
          }
        },
        {
          "name": "Backoffice Assign",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"assigned_team\": 1,\n  \"assigned_to\": 2,\n  \"note\": \"تم التعيين\"\n}"
            },
            "url": "{{baseUrl}}/api/support/backoffice/tickets/{{supportTicketId}}/assign/"
          }
        },
        {
          "name": "Backoffice Change Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"in_progress\",\n  \"note\": \"بدء المعالجة\"\n}"
            },
            "url": "{{baseUrl}}/api/support/backoffice/tickets/{{supportTicketId}}/status/"
          }
        }
      ]
    },
    {
      "name": "Features",
      "item": [
        {
          "name": "My Features",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/features/my/"
          }
        }
      ]
    },
    {
      "name": "Messaging",
      "item": [
        {
          "name": "Get Or Create Thread",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/messaging/requests/{{requestId}}/thread/"
          }
        },
        {
          "name": "List Messages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/api/messaging/requests/{{requestId}}/messages/"
          }
        },
        {
          "name": "Send Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"body\":\"hello\"}"
            },
            "url": "{{baseUrl}}/api/messaging/requests/{{requestId}}/messages/send/"
          }
        },
        {
          "name": "Mark Thread Read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": "{{baseUrl}}/api/messaging/requests/{{requestId}}/messages/read/"
          }
        }
      ]
    }
  ]
}
